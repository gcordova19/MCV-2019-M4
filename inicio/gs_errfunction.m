function [e] = gs_errfunction(X1,X2,H)
    % Transform the points
    X2p = H^(-1)*X1;
    X2p = X2p/X2p(3,:);
    X1p = H*X2;
    X1p = X1p/X1p(3,:);

    % Compute the error
    e = [(X1(1,:)'-X1p(1,:)') , (X1(2,:)'-X1p(2,:)') , (X2(1,:)'-X2p(1,:)'), (X2(2,:)'-X2p(2,:)')];
    %e = sqrt((X1(1,:)'-X1p(1,:)').^2 + (X1(2,:)'-X1p(2,:)').^2 + (X2(1,:)'-X2p(1,:)').^2 + (X2(2,:)'-X2p(2,:)').^2);
    %e = ((X1(1,:)'-X1p(1,:)').^2 + (X1(2,:)'-X1p(2,:)').^2 + (X2(1,:)'-X2p(1,:)').^2 + (X2(2,:)'-X2p(2,:)').^2);